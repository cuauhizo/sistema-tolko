<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validador de Fechas con Yup</title>
    <script src="https://cdn.jsdelivr.net/npm/yup@1.2.0/yup.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanilla-calendar-pro@1.4.14/build/vanilla-calendar.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vanilla-calendar-pro@1.4.14/build/vanilla-calendar.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 900px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            margin-top: 20px;
        }
        
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        h2 {
            color: #2575fc;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .intro {
            text-align: center;
            margin-bottom: 30px;
            color: white;
            font-size: 1.2rem;
            max-width: 800px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            border-color: #2575fc;
            outline: none;
        }
        
        button {
            background: #2575fc;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background 0.3s;
            width: 100%;
        }
        
        button:hover {
            background: #1a60d0;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        
        .valid {
            background: #e7f7ef;
            color: #2ecc71;
            border: 1px solid #2ecc71;
        }
        
        .invalid {
            background: #fde8e8;
            color: #e74c3c;
            border: 1px solid #e74c3c;
        }
        
        .examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .example-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid #2575fc;
        }
        
        .example-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2575fc;
        }
        
        .calendar-container {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }
        
        .flex-row {
            display: flex;
            gap: 20px;
        }
        
        .flex-row > div {
            flex: 1;
        }
        
        @media (max-width: 768px) {
            .flex-row {
                flex-direction: column;
            }
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .code-container {
            margin: 25px 0;
        }
    </style>
</head>
<body>
    <h1>Validador de Fechas con Yup</h1>
    
    <p class="intro">
        Yup es una librería de validación de JavaScript que permite definir y aplicar esquemas de validación a objetos.
        A continuación, se muestran diferentes ejemplos de validación de fechas con Yup.
    </p>
    
    <div class="container">
        <h2>Validador de Fechas</h2>
        
        <div class="flex-row">
            <div>
                <div class="form-group">
                    <label for="dateInput">Fecha (YYYY-MM-DD):</label>
                    <input type="date" id="dateInput" value="2023-05-15">
                </div>
                
                <div class="form-group">
                    <label for="validationType">Tipo de Validación:</label>
                    <select id="validationType">
                        <option value="required">Fecha Requerida</option>
                        <option value="min">Fecha Mínima (2023-01-01)</option>
                        <option value="max">Fecha Máxima (2023-12-31)</option>
                        <option value="range">Rango de Fechas (2023-06-01 a 2023-06-30)</option>
                        <option value="format">Formato Específico (YYYY-MM-DD)</option>
                    </select>
                </div>
                
                <button id="validateBtn">Validar Fecha</button>
                
                <div id="validationResult" class="result"></div>
            </div>
            
            <div class="calendar-container">
                <div id="calendar"></div>
            </div>
        </div>
        
        <div class="code-container">
            <h3>Código de Validación:</h3>
            <pre id="codeExample"></pre>
        </div>
        
        <h2>Ejemplos de Validación con Yup</h2>
        
        <div class="examples">
            <div class="example-card">
                <div class="example-title">Fecha Requerida</div>
                <p>Valida que el campo de fecha no esté vacío.</p>
                <pre>yup.date().required('La fecha es obligatoria')</pre>
            </div>
            
            <div class="example-card">
                <div class="example-title">Fecha Mínima</div>
                <p>Valida que la fecha sea posterior a una fecha específica.</p>
                <pre>yup.date().min(new Date('2023-01-01'), 'La fecha debe ser después del 1 de enero de 2023')</pre>
            </div>
            
            <div class="example-card">
                <div class="example-title">Fecha Máxima</div>
                <p>Valida que la fecha sea anterior a una fecha específica.</p>
                <pre>yup.date().max(new Date('2023-12-31'), 'La fecha debe ser antes del 31 de diciembre de 2023')</pre>
            </div>
            
            <div class="example-card">
                <div class="example-title">Formato de Fecha</div>
                <p>Valida que la fecha tenga un formato específico.</p>
                <pre>yup.date().typeError('Debe ser una fecha válida')</pre>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calendar = new VanillaCalendar('#calendar', {
                settings: {
                    lang: 'es',
                    visibility: {
                        weekend: false,
                    },
                },
                actions: {
                    clickDay(e, dates) {
                        const selectedDate = dates[0];
                        if (selectedDate) {
                            document.getElementById('dateInput').value = selectedDate;
                        }
                    }
                }
            });
            calendar.init();
            
            const validateBtn = document.getElementById('validateBtn');
            const dateInput = document.getElementById('dateInput');
            const validationType = document.getElementById('validationType');
            const validationResult = document.getElementById('validationResult');
            const codeExample = document.getElementById('codeExample');
            
            // Actualizar el ejemplo de código al cambiar el tipo de validación
            validationType.addEventListener('change', updateCodeExample);
            updateCodeExample();
            
            validateBtn.addEventListener('click', function() {
                const selectedValidation = validationType.value;
                const inputValue = dateInput.value;
                
                let schema;
                let validationMessage;
                
                try {
                    switch(selectedValidation) {
                        case 'required':
                            schema = yup.date().required('La fecha es obligatoria');
                            validationMessage = schema.validateSync(inputValue ? new Date(inputValue) : null);
                            break;
                        case 'min':
                            schema = yup.date().min(new Date('2023-01-01'), 'La fecha debe ser después del 1 de enero de 2023');
                            validationMessage = schema.validateSync(new Date(inputValue));
                            break;
                        case 'max':
                            schema = yup.date().max(new Date('2023-12-31'), 'La fecha debe ser antes del 31 de diciembre de 2023');
                            validationMessage = schema.validateSync(new Date(inputValue));
                            break;
                        case 'range':
                            schema = yup.date()
                                .min(new Date('2023-06-01'), 'La fecha debe ser después del 1 de junio de 2023')
                                .max(new Date('2023-06-30'), 'La fecha debe ser antes del 30 de junio de 2023');
                            validationMessage = schema.validateSync(new Date(inputValue));
                            break;
                        case 'format':
                            schema = yup.date().typeError('Debe ser una fecha válida en formato YYYY-MM-DD');
                            validationMessage = schema.validateSync(new Date(inputValue));
                            break;
                    }
                    
                    showResult('¡Fecha válida!', true);
                } catch (error) {
                    showResult(error.message, false);
                }
            });
            
            function showResult(message, isValid) {
                validationResult.textContent = message;
                validationResult.className = 'result ' + (isValid ? 'valid' : 'invalid');
                validationResult.style.display = 'block';
            }
            
            function updateCodeExample() {
                const selectedValidation = validationType.value;
                let code = '';
                
                switch(selectedValidation) {
                    case 'required':
                        code = `// Validación de fecha requerida
const schema = yup.date().required('La fecha es obligatoria');

try {
  schema.validateSync(new Date(dateValue));
  console.log('Fecha válida');
} catch (error) {
  console.log(error.message);
}`;
                        break;
                    case 'min':
                        code = `// Validación de fecha mínima
const schema = yup.date()
  .min(new Date('2023-01-01'), 
       'La fecha debe ser después del 1 de enero de 2023');

try {
  schema.validateSync(new Date(dateValue));
  console.log('Fecha válida');
} catch (error) {
  console.log(error.message);
}`;
                        break;
                    case 'max':
                        code = `// Validación de fecha máxima
const schema = yup.date()
  .max(new Date('2023-12-31'), 
       'La fecha debe ser antes del 31 de diciembre de 2023');

try {
  schema.validateSync(new Date(dateValue));
  console.log('Fecha válida');
} catch (error) {
  console.log(error.message);
}`;
                        break;
                    case 'range':
                        code = `// Validación de rango de fechas
const schema = yup.date()
  .min(new Date('2023-06-01'), 
       'La fecha debe ser después del 1 de junio de 2023')
  .max(new Date('2023-06-30'), 
       'La fecha debe ser antes del 30 de junio de 2023');

try {
  schema.validateSync(new Date(dateValue));
  console.log('Fecha válida');
} catch (error) {
  console.log(error.message);
}`;
                        break;
                    case 'format':
                        code = `// Validación de formato de fecha
const schema = yup.date()
  .typeError('Debe ser una fecha válida en formato YYYY-MM-DD');

try {
  schema.validateSync(new Date(dateValue));
  console.log('Fecha válida');
} catch (error) {
  console.log(error.message);
}`;
                        break;
                }
                
                codeExample.textContent = code;
            }
        });
    </script>
</body>
</html>